<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AlgoCrate AI</title>

<style>
  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: transparent;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  }

  #chat {
    width: 360px;
    height: 500px;
    background: #111;
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(0,0,0,0.45);
  }

  #header {
    background: #6a00ff;
    padding: 14px;
    text-align: center;
    font-weight: 700;
    color: #fff;
  }

  #messages {
    flex: 1;
    padding: 12px;
    overflow-y: auto;
    font-size: 14px;
    color: white;
    scroll-behavior: smooth;
  }

  .ai {
    background: #1f1f1f;
    padding: 8px 12px;
    border-radius: 10px;
    margin-bottom: 10px;
    max-width: 92%;
    line-height: 1.4;
    white-space: pre-line;
    align-self: flex-start;
  }

  .user {
    background: #6a00ff;
    padding: 8px 12px;
    border-radius: 10px;
    margin-bottom: 10px;
    margin-left: auto;
    max-width: fit-content;
    text-align: right;
    line-height: 1.3;
    white-space: pre-wrap;
  }

  #inputBox {
    display: flex;
    gap: 8px;
    padding: 10px;
    background: #181818;
  }

  input {
    flex: 1;
    padding: 10px;
    border-radius: 8px;
    border: none;
    outline: none;
  }

  button {
    background: #6a00ff;
    color: white;
    border: none;
    padding: 10px 14px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
  }
</style>
</head>

<body>

<div id="chat">
  <div id="header">AlgoCrate AI</div>

  <div id="messages">
    <div class="ai">
Hi, I am AlgoCrate AI.

You can ask me about:
- DSA learning order
- Web Development basics
- Tech Vault content
- Roadmaps and next steps
    </div>
  </div>

  <div id="inputBox">
    <input id="input" placeholder="Ask AlgoCrate..." />
    <button onclick="send()">Send</button>
  </div>
</div>

<script>
/* const API_KEY = "AIzaSyBO8dVArJ78KnF1GnFrrtDn3lpuHPD9T84"; */
const messages = document.getElementById("messages");
const input = document.getElementById("input");

input.focus();

input.addEventListener("keydown", e => {
  if (e.key === "Enter") {
    e.preventDefault();
    send();
  }
});

/* PROMPT UNCHANGED */
const SYSTEM_PROMPT = `
You are AlgoCrate AI.

You guide first and second year B.Tech CSE students.

STRICT RULES:
- NO markdown
- NO special symbols
- NO long paragraphs
- Answer in simple points
- Maximum 6 to 8 short lines
- Calm, friendly, senior-like tone
- Stay ONLY within AlgoCrate topics

ALGOCRATE CONTEXT:
- DSA Crate: language basics, logic building, DSA fundamentals
- Web Development Crate: frontend, backend learning paths
- Tech Vault: important tools, tech updates, productivity
- Roadmaps: year-wise and goal-wise guidance
- Code Editor: external practice redirection

If confused:
- Tell what to start
- Why it matters
- What result it gives
`;

async function send() {
  const text = input.value.trim();
  if (!text) return;

  const userDiv = document.createElement("div");
  userDiv.className = "user";
  userDiv.innerText = text;
  messages.appendChild(userDiv);

  input.value = "";
  input.focus();

  const aiDiv = document.createElement("div");
  aiDiv.className = "ai";
  aiDiv.innerText = "Thinking...";
  messages.appendChild(aiDiv);

  /* Scroll to AI message start */
  aiDiv.scrollIntoView({ behavior: "smooth", block: "start" });

  try {
    const res = await fetch(
      "https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent?key=" + API_KEY,
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          contents: [{
            parts: [{
              text: SYSTEM_PROMPT + "\n\nUser question:\n" + text
            }]
          }]
        })
      }
    );

    const data = await res.json();
    aiDiv.innerText =
      data?.candidates?.[0]?.content?.parts?.[0]?.text ||
      "Please ask something related to AlgoCrate learning.";

    aiDiv.scrollIntoView({ behavior: "smooth", block: "start" });

  } catch (err) {
    aiDiv.innerText = "Error connecting to AlgoCrate AI.";
  }
}
</script>

</body>
</html>
