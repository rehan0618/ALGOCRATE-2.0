<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DSA CRATE — Nested Lectures & Problems</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<!-- FIREBASE CONFIG: keep this here and replace with your actual config -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDtzHSWrsw8XYHDVQpvys8nAdaioZn7rdI",
    authDomain: "trail-2e3cf.firebaseapp.com",
    projectId: "trail-2e3cf",
    storageBucket: "trail-2e3cf.firebasestorage.app",
    messagingSenderId: "386786330171",
    appId: "1:386786330171:web:58e3ceb2046ce441f97e1e",
    measurementId: "G-CGTP7JZCNS"
  };
  firebase.initializeApp(firebaseConfig);
</script>

<!-- Link to the logic file -->
<script src="dsa.js" defer></script>

<style>
  /* (your original CSS — trimmed for brevity; keep whatever you had) */
  *{box-sizing:border-box;margin:0;padding:0}
  body{background:#111;color:#fff;font-family:Inter,Segoe UI,system-ui,Arial;line-height:1.45;padding:20px;}
  .container{max-width:1100px;margin:0 auto;}
  h1{font-size:28px;color:#9a32ff;margin-bottom:8px}
  p.lead{color:#ccc;margin-bottom:18px}
  /* rest of your CSS from before... */
  .progress-overview{background:#1e1e1e;padding:18px;border-radius:10px;margin-bottom:18px}
  .flex{display:flex;gap:12px;align-items:center}
  .progress-circle{position:relative;width:88px;height:88px;}
  .progress-circle svg{transform:rotate(-90deg)}
  .progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700}
  .difficulty-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
  .card{background:#222;padding:12px;border-radius:8px}
  .steps-container{margin-top:18px}
  .step-section{background:linear-gradient(180deg,#181818,#232323);border:1px solid #2a2a2a;border-radius:10px;margin-bottom:12px;overflow:hidden}
  .step-header{display:flex;align-items:center;gap:12px;padding:12px;cursor:pointer}
  .step-title{font-weight:700;flex:1}
  .step-progress{display:flex;align-items:center;gap:10px}
  .progress-bar{width:220px;height:8px;background:#2b2b2b;border-radius:6px;overflow:hidden}
  .progress-fill{height:100%;background:linear-gradient(90deg,#9a32ff,#9a32ff);width:0%}
  .step-content{display:none;padding:12px;border-top:1px solid rgba(255,107,53,0.06)}
  .step-content.active{display:block}
  .lecture { background:#262626;border-radius:8px;padding:10px;margin-bottom:10px }
  .lecture-header{display:flex;align-items:center;gap:10px;cursor:pointer}
  .lecture-title{font-weight:600;flex:1}
  .lecture-subinfo{font-size:13px;color:#ddd}
  .lecture-content{display:none;padding-top:10px}
  .lecture-content.active{display:block}
  .problem-item{display:flex;align-items:center;gap:10px;padding:10px;border-radius:8px;background:#2b2b2b;margin-bottom:8px;flex-wrap:wrap}
  .problem-status{width:22px;height:22px;border-radius:50%;border:2px solid #666;display:flex;align-items:center;justify-content:center;cursor:pointer;flex:0 0 22px}
  .problem-status.completed{background:#3fbf7f;border-color:#3fbf7f}
  .problem-status.completed::after{content:'✓';color:#fff;font-size:12px}
  .problem-title{flex:1;font-weight:500;min-width:200px}
  .problem-info{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
  .difficulty-badge{padding:4px 8px;border-radius:4px;font-size:11px;font-weight:600;text-transform:uppercase}
  .difficulty-easy{background:#22c55e;color:#fff}
  .difficulty-medium{background:#f59e0b;color:#fff}
  .difficulty-hard{background:#ef4444;color:#fff}
  .resource-links{display:flex;gap:8px;flex-wrap:wrap}
  .btn{padding:6px 12px;border-radius:6px;text-decoration:none;color:#fff;font-size:13px;font-weight:500}
  .btn.view{background:#9a32ff}
  .toggle-btn{background:none;border:none;color:#9a32ff;font-weight:700;transform-origin:center;transition:transform .2s}
  .toggle-btn.rot{transform:rotate(90deg)}
  @media (max-width:760px){ 
    .progress-bar{width:120px} 
    .difficulty-stats{grid-template-columns:1fr} 
    .problem-item{flex-direction:column;align-items:flex-start}
    .problem-info{width:100%;justify-content:space-between}
    .resource-links{width:100%;justify-content:flex-start}
    
  }
</style>
</head>
<body>
  <div class="container">
    <h1>DSA CRATE</h1>
    <p class="lead">Nested structure: Step → Lecture → Problems. Click the round dot to mark a problem completed (persists per user in Firebase).</p>

    <div class="progress-overview">
      <div class="flex">
        <div class="progress-circle" title="Overall progress">
          <svg width="88" height="88"><circle cx="44" cy="44" r="39" class="circ-bg" stroke="#333" stroke-width="6" fill="none"></circle><circle cx="44" cy="44" r="39" class="circ-fill" stroke="#9a32ff" stroke-width="6" stroke-linecap="round" stroke-dasharray="245" stroke-dashoffset="245" fill="none"></circle></svg>
          <div class="progress-text" id="overallPercent">0%</div>
        </div>
        <div>
          <div style="font-weight:700">Total Progress</div>
          <div id="overallCount">0 / 455 completed</div>
        </div>
      </div>

      <div class="difficulty-stats" style="margin-top:12px">
        <div class="card"><div style="font-weight:700">Easy</div><div id="easyCount">0 / 131</div><div class="progress-bar" style="margin-top:8px"><div id="easyBar" class="progress-fill" style="width:0%"></div></div></div>
        <div class="card"><div style="font-weight:700">Medium</div><div id="mediumCount">0 / 187</div><div class="progress-bar" style="margin-top:8px"><div id="mediumBar" class="progress-fill" style="width:0%"></div></div></div>
        <div class="card"><div style="font-weight:700">Hard</div><div id="hardCount">0 / 136</div><div class="progress-bar" style="margin-top:8px"><div id="hardBar" class="progress-fill" style="width:0%"></div></div></div>
      </div>
    </div>

    <div id="stepsContainer" class="steps-container"></div>
  </div>

 <!-- ASK GEMINI BUTTON -->
<div id="ask-gemini">Ask Gemini</div>

<!-- GEMINI CHAT -->
<iframe id="gemini-iframe" src="gemini-widget.html"></iframe>

<style>
  #ask-gemini {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #6a00ff;
    color: white;
    padding: 14px 22px;
    border-radius: 999px;
    font-weight: 700;
    cursor: pointer;
    z-index: 99999;
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
  }

  #gemini-iframe {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 360px;
    height: 500px;
    border: none;
    border-radius: 16px;
    display: none;
    z-index: 99998;
    background: transparent;
  }
</style>

<script>
  const btn = document.getElementById("ask-gemini");
  const iframe = document.getElementById("gemini-iframe");

  btn.onclick = () => {
    iframe.style.display =
      iframe.style.display === "none" ? "block" : "none";
  };
</script>


</body>
</html>